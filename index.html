<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë”°ë‹˜ì„ ìœ„í•œ ì¼€ì´í¬ ì œì‘ì†Œ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #fff0f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            overflow: hidden;
            touch-action: none;
        }

        h1 { color: #ff69b4; margin-top: 15px; }
        #status-text { font-size: 1.2rem; color: #d66d87; margin-bottom: 10px; }

        /* ìŠ¤í…Œì´ì§€ ê´€ë¦¬ */
        .stage { display: none; flex-direction: column; align-items: center; width: 100%; }
        .stage.active { display: flex; }

        /* 1ë‹¨ê³„: ì¼€ì´í¬ ê¾¸ë¯¸ê¸° */
        #cake-base {
            width: 280px;
            height: 200px;
            background: #ffffff; /* ê¸°ë³¸ ìƒí¬ë¦¼ */
            border-radius: 30px;
            position: relative;
            box-shadow: 0 10px 0 #f0f0f0, 0 20px 0 #e0e0e0;
            margin: 20px;
            cursor: crosshair;
            overflow: hidden; /* ì¼ì´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šê²Œ */
        }

        /* í† í•‘ ì„ íƒ ë°” */
        .topping-bar {
            display: flex; gap: 10px; padding: 15px;
            background: white; border-radius: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            flex-wrap: wrap; justify-content: center; max-width: 90%;
        }

        .topping-item { 
            font-size: 35px; cursor: pointer; padding: 5px; 
            border: 3px solid transparent; border-radius: 15px;
            transition: all 0.2s;
        }
        
        /* ì„ íƒëœ í† í•‘ ê°•ì¡° */
        .topping-item.selected {
            border-color: #ff69b4;
            background: #ffe4e1;
            transform: scale(1.1);
        }

        .placed-topping {
            position: absolute; font-size: 35px; pointer-events: none;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        /* ì¼ í† í•‘ ìŠ¤íƒ€ì¼ */
        .placed-jam {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            pointer-events: none;
            filter: blur(5px);
            opacity: 0.8;
            transform: translate(-50%, -50%);
            z-index: 1; /* ì¼ì€ ë‹¤ë¥¸ í† í•‘ë³´ë‹¤ ì•„ë˜ì— */
        }

        /* ë°°ë‹¬ ì• ë‹ˆë©”ì´ì…˜ */
        #delivery-scene { font-size: 80px; position: relative; width: 100%; height: 150px; margin-top: 50px;}
        #scooter { position: absolute; left: -120px; transition: left 3s linear; }

        button {
            margin-top: 20px; padding: 12px 30px; font-size: 18px;
            border: none; border-radius: 30px; background: #ff69b4;
            color: white; cursor: pointer; font-weight: bold;
        }
    </style>
</head>
<body>

    <h1 id="status-text">ğŸ“ í† í•‘ì„ ê³ ë¥´ê³  ì¼€ì´í¬ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”!</h1>

    <div id="stage1" class="stage active">
        <div id="cake-base" onclick="placeTopping(event)"></div>
        
        <div class="topping-bar">
            <div class="topping-item selected" onclick="selectTopping(this, 'ğŸ“', 'emoji')">ğŸ“</div>
            <div class="topping-item" onclick="selectTopping(this, 'ğŸ«', 'emoji')">ğŸ«</div>
            <div class="topping-item" onclick="selectTopping(this, 'ğŸ•¯ï¸', 'emoji')">ğŸ•¯ï¸</div>
            <div class="topping-item" onclick="selectTopping(this, 'ğŸ’–', 'emoji')">ğŸ’–</div>
            <div class="topping-item" onclick="selectTopping(this, 'ğŸŠ', 'emoji')">ğŸŠ</div>
            <div class="topping-item" onclick="selectTopping(this, 'ğŸ«', 'emoji')">ğŸ«</div>
            <div class="topping-item" onclick="selectTopping(this, '#ff0000', 'jam')" title="ë”¸ê¸°ì¼">ğŸ’‰ğŸ“</div>
            <div class="topping-item" onclick="selectTopping(this, '#4b0082', 'jam')" title="í¬ë„ì¼">ğŸ’‰ğŸ‡</div>
            <div class="topping-item" onclick="selectTopping(this, '#ffd700', 'jam')" title="ê¿€">ğŸ’‰ğŸ¯</div>
        </div>
        
        <button onclick="goStage2()">í¬ì¥í•˜ê³  ë°°ë‹¬í•˜ê¸° ğŸ‘‰</button>
    </div>

    <div id="stage2" class="stage">
        <div id="delivery-scene">
            <div id="scooter">ğŸ›µ ğŸ“¦</div>
        </div>
        <div style="font-size: 60px;">ğŸ </div>
        <button onclick="location.reload()">ìƒˆë¡œ ë§Œë“¤ê¸°</button>
    </div>

    <script>
        let selectedTopping = 'ğŸ“';
        let selectedType = 'emoji'; // 'emoji' ë˜ëŠ” 'jam'

        // í† í•‘ ì„ íƒ í•¨ìˆ˜
        function selectTopping(element, value, type) {
            document.querySelectorAll('.topping-item').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedTopping = value;
            selectedType = type;
        }

        // ì¼€ì´í¬ í´ë¦­ ì‹œ í† í•‘ ë°°ì¹˜
        function placeTopping(e) {
            const cake = document.getElementById('cake-base');
            const rect = cake.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            if (selectedType === 'emoji') {
                const topping = document.createElement('div');
                topping.className = 'placed-topping';
                topping.innerText = selectedTopping;
                topping.style.left = x + 'px';
                topping.style.top = y + 'px';
                // ì•½ê°„ì˜ ëœë¤ íšŒì „
                topping.style.transform = `translate(-50%, -50%) rotate(${Math.random() * 40 - 20}deg)`;
                cake.appendChild(topping);
            } else {
                // ì¼ ë°°ì¹˜
                const jam = document.createElement('div');
                jam.className = 'placed-jam';
                jam.style.backgroundColor = selectedTopping;
                jam.style.left = x + 'px';
                jam.style.top = y + 'px';
                // ì¼ í¬ê¸° ëœë¤í™”
                const size = Math.random() * 20 + 30;
                jam.style.width = size + 'px';
                jam.style.height = size + 'px';
                cake.appendChild(jam);
            }
        }

        function goStage2() {
            document.getElementById('status-text').innerText = "ğŸ›µ ìŠìŠ~ ì•„ë¹ ê°€ ë°°ë‹¬ ê°€ìš”!";
            document.getElementById('stage1').classList.remove('active');
            document.getElementById('stage2').classList.add('active');
            
            const scooter = document.getElementById('scooter');
            setTimeout(() => {
                scooter.style.left = "calc(100% - 120px)";
            }, 100);

            setTimeout(() => {
                alert("ëµë™! ë”°ë‹˜ì´ ë§Œë“  ì„¸ìƒì—ì„œ ê°€ì¥ ë§›ìˆëŠ” ì¼€ì´í¬ê°€ ë°°ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‚");
            }, 3200);
        }
    </script>
</body>
</html>